<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Manager</title>
    <style>
        :root { --primary: #2563eb; --bg: #f8fafc; --text: #1e293b; }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .container { max-width: 500px; width: 100%; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); box-sizing: border-box; }
        h1, h2 { text-align: center; }
        .section { border-bottom: 1px solid #e2e8f0; padding-bottom: 20px; margin-bottom: 20px; }
        label { display: block; font-weight: 600; margin-top: 15px; font-size: 0.9rem; }
        input, textarea, select { width: 100%; padding: 12px; margin-top: 5px; border: 1px solid #cbd5e1; border-radius: 8px; box-sizing: border-box; }
        .hint { font-size: 0.75rem; color: #64748b; }
        .btn { width: 100%; padding: 14px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-outline { background: transparent; border: 1px solid var(--primary); color: var(--primary); }
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        #status-msg { text-align: center; font-weight: bold; padding: 10px; border-radius: 5px; display: none; margin-bottom: 10px; }
        .success { background: #dcfce7; color: #166534; }
        .error { background: #fee2e2; color: #991b1b; }
    </style>
</head>
<body>

<div class="container">
    <h1>Profile Manager</h1>
    <div id="status-msg"></div>

    <div class="section" id="login-section">
        <h2>Edit Profile</h2>
        <input type="text" id="login-slug" placeholder="Your Slug">
        <input type="password" id="login-pass" placeholder="Password">
        <button class="btn btn-primary" onclick="loadProfile()">Load for Editing</button>
    </div>

    <div id="main-form">
        <h2 id="form-title">Create New Profile</h2>
        <label>Slug</label><input type="text" id="slug" placeholder="my-link">
        <label>Password</label><input type="text" id="pass">
        <label>Template</label>
        <select id="temp">
            <option value="p1">Design 01 - Minimal</option>
            <option value="p2">Design 02 - Dark</option>
            <option value="p3">Design 03 - Chameleon</option>
            <option value="p3">Design 04 - BENNESSism</option>
        </select>

        <hr>
        <label>Display Name</label><input type="text" id="name">
        <label>Bio</label><textarea id="bio" rows="3"></textarea>
        <label>Profile Image URL</label><input type="text" id="pfp">
        <label>YouTube ID</label><input type="text" id="yt_video">

        <hr>
        <h3>Buttons</h3>
        <div class="row"><input type="text" id="link1_text" placeholder="Title"><input type="text" id="link1_url" placeholder="URL"></div>
        <div class="row"><input type="text" id="link2_text" placeholder="Title"><input type="text" id="link2_url" placeholder="URL"></div>
        <div class="row"><input type="text" id="link3_text" placeholder="Title"><input type="text" id="link3_url" placeholder="URL"></div>
        <div class="row"><input type="text" id="link4_text" placeholder="Title"><input type="text" id="link4_url" placeholder="URL"></div>
        <div class="row"><input type="text" id="link5_text" placeholder="Title"><input type="text" id="link5_url" placeholder="URL"></div>

        <hr>
        <h3>Socials (Usernames only)</h3>
        <div class="row">
            <div><label>Email</label><input type="text" id="email"></div>
            <div><label>WhatsApp</label><input type="text" id="wa"></div>
        </div>
        <div class="row">
            <div><label>Instagram</label><input type="text" id="ig"></div>
            <div><label>Facebook</label><input type="text" id="fb"></div>
        </div>
        <div class="row">
            <div><label>Twitter</label><input type="text" id="tw"></div>
            <div><label>LinkedIn</label><input type="text" id="li"></div>
        </div>
        <div class="row">
            <div><label>Phone</label><input type="text" id="tel"></div>
        </div>

        <button class="btn btn-primary" style="margin-top:20px" onclick="submitData()">Save Profile</button>
        <button class="btn btn-outline" onclick="window.location.reload()">Clear / New</button>
    </div>
</div>

<script>
    const API_URL = "https://script.google.com/macros/s/AKfycbwmSwq2K_xX6qCWfIZNHzeJzTgUuhoX7nJooe3ZWv00NhVed-q7LBxegHzKKhuKGcPmZA/exec";
    const fields = ['slug','pass','temp','name','bio','pfp','yt_video','link1_text','link1_url','link2_text','link2_url','link3_text','link3_url','link4_text','link4_url','link5_text','link5_url','ig','wa','fb','li','tw','tel','email'];

    document.getElementById('slug').addEventListener('input', function(e) {
        this.value = this.value.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
    });

    async function loadProfile() {
        const u = document.getElementById('login-slug').value;
        const p = document.getElementById('login-pass').value;
        showStatus("Loading...", "");
        try {
            const res = await fetch(`${API_URL}?u=${u}&p=${p}`);
            const result = await res.json();
            if (result.success && result.mode === "edit") {
                fields.forEach(f => { if(document.getElementById(f)) document.getElementById(f).value = result.data[f] || ""; });
                document.getElementById('form-title').innerText = "Editing: " + result.data.slug;
                document.getElementById('login-section').style.display = "none";
                showStatus("Loaded!", "success");
            } else { showStatus("Error: Check slug/pass", "error"); }
        } catch (e) { showStatus("Connection Error", "error"); }
    }

    async function submitData() {
    let payload = {};
    fields.forEach(f => { if(document.getElementById(f)) payload[f] = document.getElementById(f).value; });
    
    if(!payload.slug || !payload.pass) return showStatus("Slug & Pass required", "error");
    
    showStatus("Saving...", "");
    try {
        const response = await fetch(API_URL, { method: "POST", body: JSON.stringify(payload) });
        const res = await response.json();
        
        if(res.success) {
            // This creates the simple statement you wanted
            const userUrl = "https://noagrp.github.io/urprofile/" + payload.slug;
            showStatus("Saved! Your url is: " + userUrl, "success");
            window.scrollTo(0,0);
        } else {
            showStatus(res.message || "Error saving profile", "error");
        }
    } catch (e) { 
        // If Google script saves but blocks the response, we still show the link
        const userUrl = "https://noagrp.github.io/urprofile/" + payload.slug;
        showStatus("Saved! Your url is: " + userUrl, "success");
        window.scrollTo(0,0);
    }
}

    function showStatus(msg, type) {
        const s = document.getElementById('status-msg');
        s.innerText = msg; s.className = type; s.style.display = "block";
    }
</script>
</body>
</html>





